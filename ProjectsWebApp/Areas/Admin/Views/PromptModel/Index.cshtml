@model IEnumerable<PromptModel>
@{
    ViewData["Title"] = "Modelle-Managment";
}

<style>
    /* —— gleiche Basis wie in KiBar —— */
    .container {
        width: 100%;
        max-width: 100%;
    }

    .form-section {
        background: #fff;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 25px;
        border: 1px solid #e4e4e4;
        box-shadow: 0 8px 24px rgba(0,0,0,.08);
        transition: box-shadow .25s, transform .25s;
    }

        .form-section:hover {
            box-shadow: 0 12px 32px rgba(0,0,0,.12);
            transform: translateY(-2px);
        }

    .section-title {
        color: #333;
        border-bottom: 1px solid #e4e4e4;
        padding-bottom: 12px;
        margin-bottom: 20px;
        font-weight: 600;
        font-size: 1.3rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .section-title1 {
        color: #333;
        /* border-bottom: 1px solid #e4e4e4; */
        padding-bottom: 12px;
        margin-bottom: 20px;
        font-weight: 600;
        font-size: 1.3rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .btn-success {
        background: black;
        ; /* primary */
        /* border: 1px solid #4a86e8; */
        color: #fff;
        border: none;
    }

        .btn-success:hover {
            background: #393939;
            box-shadow: 0 6px 18px rgba(74, 134, 232, .3);
        }



    .btn-outline-danger {
        border-color: #d9534f;
        color: #d9534f;
    }

        .btn-outline-danger:hover {
            background: #d9534f;
            color: #fff;
        }

    .btn-outline-light {
        border-color: #ccc;
        color: #333;
    }

        .btn-outline-light:hover {
            background: #e6e6e6;
            color: #333;
        }

    /* Tabelle hell, fein gerahmt */
    .table-wrap {
        overflow-x: auto;
    }

    table.model-table {
        width: 100%;
        background: #fff;
        color: #222;
    }

        table.model-table thead {
            background: #f7f7f7;
        }

        table.model-table th {
            font-weight: 600;
            border-bottom: 1px solid #e4e4e4;
        }

        table.model-table td {
            border-bottom: 1px solid #f0f0f0;
        }

        table.model-table th.redirect-col,
        table.model-table td.redirect-col {
            padding-left: 4rem;
        }

        table.model-table th.actions-col,
        table.model-table td.actions-col {
            text-align: right;
            padding-right: 1.25rem;
        }

        table.model-table a.text-info {
            color: #4a86e8 !important;
        }

    /* DataTables Suchfeld angleichen */
    .dataTables_filter {
        margin: 0 0 15px 0;
    }

        .dataTables_filter input {
            background: #fff;
            border: 1px solid #ced4da;
            border-radius: 6px;
            padding: 8px 12px;
            outline: none;
            width: 240px;
        }

            .dataTables_filter input:focus {
                border-color: #4a86e8;
                box-shadow: 0 0 0 .20rem rgba(74,134,232,.25);
            }

    .dataTables_paginate .paginate_button {
        padding: .25rem .6rem !important;
        border-radius: 6px !important;
        margin: 0 .1rem !important;
    }

    @@media (min-width: 768px) and (max-width: 1199.98px) {
        table.model-table .model-action-buttons {
            gap: .75rem !important;
        }
    }
</style>

<div class="mt-4">
    <h2 class="mb-4 page-title">KI-Modelle verwalten</h2>

    <div class="form-section">
        <div class="section-title">
            <span><i class="bi bi-lightbulb me-2"></i> Prompt-Modelle</span>
            <a asp-action="Upsert" class="btn btn-success btn-sm">
                <i class="bi bi-plus-lg"></i> Modell
            </a>
        </div>

        <div class="table-wrap">
            <table id="modelTable" class="model-table table table-hover align-middle mb-0">
                <thead>
                    <tr>
                        <th style="width:30%">Titel</th>
                        <th style="width:55%" class="redirect-col">Redirect URL</th>
                        <th style="width:15%" class="text-end actions-col">Aktionen</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var chatModel in Model)
                    {
                        <tr>
                            <td class="fw-semibold">@chatModel.Titel</td>
                            <td class="redirect-col">
                                <a href="@chatModel.RedirectUrl" target="_blank" class="text-info text-decoration-underline">
                                    @chatModel.RedirectUrl
                                </a>
                            </td>
                            <td class="text-end actions-col">
                                <div class="d-flex justify-content-end gap-2 model-action-buttons">
                                    <a asp-action="Upsert" asp-route-id="@chatModel.Id" class="btn btn-sm btn-warning">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>

                                    <form asp-action="Delete"
                                          asp-route-id="@chatModel.Id"
                                          method="post"
                                          class="d-inline"
                                          onsubmit="return confirm('Modell wirklich löschen?');">
                                        <button class="btn btn-sm btn-danger">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
           
        </div>
        <hr />
        <div class="section-title1">
            <span></span>
            <a asp-action="Upsert" class="btn btn-success btn-sm mt-3">
                <i class="bi bi-plus-lg"></i> Modell hinzufügen
            </a>
        </div>
    </div>
  
</div>

@section Scripts {
    <script>
             $(function () {
            $('#modelTable').DataTable({
                pagingType: "simple",
                lengthChange: false,
                language: {
                    search: "",
                    searchPlaceholder: "Suchen …",
                    paginate: { previous: "‹", next: "›" },
                    info: "Zeige _START_ bis _END_ von _TOTAL_ Einträgen",
                    infoEmpty: "Keine Einträge vorhanden",
                    infoFiltered: "(gefiltert aus _MAX_ Einträgen)",
                    zeroRecords: "Keine passenden Einträge gefunden",
                    loadingRecords: "Lade …",
                    processing:   "Bitte warten …"
                }
            });
        });

    </script>
}

@model ProjectsWebApp.Models.PromptTemplate
@using System.Text.Json
@{
    var mainFilters = JsonSerializer.Deserialize<List<JsonElement>>(Model.FilterJson ?? "[]")!;
}
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>@Model.Title â€“ Geteilter Prompt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        body { background:#f5f5f5; font-family: Segoe UI, sans-serif; }
        .shell { width: 100%; margin: 2.5rem 0; }
        .card-main { border-radius: 1rem; box-shadow: 0 12px 30px rgba(15,23,42,.14); overflow:hidden; }
        .card-header-gradient { background:#393939; color:#fff; padding:1.75rem 2rem; }
        .badge-tag { background:#336633; color:#fff; margin:.1rem .2rem .1rem 0; padding:.15rem .55rem; border-radius:.5rem; font-size:.75rem; }
        pre.prompt-box { background:#fff; border-radius:.5rem; padding:1rem; white-space:pre-wrap; border:1px solid #e2e8f0; font-family:Consolas,monospace; font-size:.9rem; }
        .meta-label { font-weight:600; }
    </style>
</head>
<body>
    <div class="shell">
        <div class="card card-main">
            <div class="card-header-gradient d-flex align-items-center justify-content-between">
                <div>
                    <div class="text-uppercase small text-muted mb-1">Geteilter Prompt</div>
                    <h1 class="h4 mb-0">@Model.Title</h1>
                    <div class="mt-1 text-light small">Akronym: @Model.Akronym</div>
                </div>
            </div>
            <div class="card-body p-4">
                @if (!string.IsNullOrWhiteSpace(Model.Beschreibung))
                {
                    <p class="mb-3 text-muted">@Model.Beschreibung</p>
                }

                @if (!string.IsNullOrWhiteSpace(Model.Autorin) || !string.IsNullOrWhiteSpace(Model.Lizenz))
                {
                    <div class="mb-3 small text-muted">
                        @if (!string.IsNullOrWhiteSpace(Model.Autorin))
                        {
                            <div><span class="meta-label">Autor*in:</span> @Model.Autorin</div>
                        }
                        @if (!string.IsNullOrWhiteSpace(Model.Lizenz))
                        {
                            <div><span class="meta-label">Lizenz (Ink. Re-Prompting):</span> @Model.Lizenz</div>
                        }
                    </div>
                }

                @if (!string.IsNullOrWhiteSpace(Model.UsedModels))
                {
                    <div class="mb-3 small text-muted">
                        <span class="meta-label">Verwendete Modelle:</span> @Model.UsedModels
                    </div>
                }

                @if (mainFilters.Any())
                {
                    <h6 class="mb-2 text-secondary">Filter-Kriterien</h6>
                    <div class="mb-3">
                        @foreach (var f in mainFilters)
                        {
                            var val = f.GetProperty("value").GetString();
                            if (!string.IsNullOrWhiteSpace(val))
                            {
                                <span class="badge-tag">@val</span>
                            }
                        }
                    </div>
                }

                <h6 class="mb-2 text-secondary">Prompt-Inhalt</h6>
                <pre class="prompt-box">@Html.Raw(Model.PromptHtml)</pre>
            </div>
        </div>
    </div>
</body>
</html>

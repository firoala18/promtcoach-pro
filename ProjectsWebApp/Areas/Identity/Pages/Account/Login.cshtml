@page
@model LoginModel
@{
    ViewData["Title"] = "Log in";
}

<!-- —————————————————  STYLES  ————————————————— -->
<style>
    /*  layout  */
    .login-shell {
        min-height: 90vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .card-login {
        width: 100%;
        max-width: 420px;
        background: #fff;
        border-radius: 18px;
        padding: 32px 36px;
        box-shadow: 0 15px 40px rgba(0,0,0,.08);
        font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif
    }

    /* Responsive adjustments for login card */
    @@media (max-width: 480px) {
        .card-login {
            padding: 24px 20px;
            border-radius: 12px;
            margin: 0 10px;
        }
        .card-login h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        .input-wrap {
            height: 44px;
        }
        .btn-primary-lg, .btn-alt {
            height: 44px;
        }
    }

        /*  heading  */
        .card-login h2 {
            font-weight: 700;
            margin-bottom: 28px;
            text-align: center
        }

    /*  input wrapper  */
    .form-group {
        margin-bottom: 18px;
    }

    .input-wrap {
        display: flex;
        align-items: center;
        height: 48px;
        border: 1.5px solid #e5e7eb;
        border-radius: 12px;
        padding: 0 14px;
        transition: .18s
    }

        .input-wrap:focus-within {
            border-color: #3388ff;
            box-shadow: 0 0 0 2px rgba(51,136,255,.25)
        }

        .input-wrap svg {
            flex: 0 0 20px;
            fill: #a8acb2
        }

    .form-control {
        border: 0;
        outline: none;
        flex: 1;
        height: 100%;
        padding-left: 10px;
        background: transparent;
    }

    /*  remember / forgot  */
    .options-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 22px
    }

        .options-row label {
            font-size: .9rem
        }

    .link-sm {
        font-size: .9rem;
        color: #3388ff;
        cursor: pointer;
        text-decoration: none
    }

        .link-sm:hover {
            text-decoration: underline
        }

    /*  submit  */
    .btn-primary-lg {
        background: #151717;
        border: 0;
        width: 100%;
        height: 48px;
        border-radius: 12px;
        color: #fff;
        font-weight: 600;
        margin-top: 10px
    }

        .btn-primary-lg:hover {
            background: #23272a
        }

    /*  small note / divider  */
    .note {
        text-align: center;
        font-size: .9rem;
        margin: 20px 0 6px
    }

        .note.divider {
            position: relative;
            margin: 26px 0 12px
        }

            .note.divider:before {
                content: '';
                position: absolute;
                left: 0;
                right: 0;
                top: 50%;
                height: 1px;
                background: #e5e7eb
            }

            .note.divider span {
                background: #fff;
                padding: 0 10px
            }

    /*  external auth  */
    .btn-alt {
        display: flex;
        align-items: center;
        gap: 10px;
        justify-content: center;
        height: 48px;
        width: 100%;
        border: 1px solid #e3e5e9;
        border-radius: 12px;
        background: #fff;
        font-weight: 500;
        margin-top: 10px;
        transition: .15s
    }

        .btn-alt:hover {
            border-color: #3388ff
        }

        .btn-alt img {
            height: 20px;
            width: 20px
        }

    .validation-summary-errors {
        font-size: .9rem
    }
</style>

<!-- —————————————————  PAGE  ————————————————— -->
<div class="login-shell">
    <form id="account" method="post" class="card-login">
        <h2>Log in</h2>

        <div asp-validation-summary="ModelOnly" class="text-danger validation-summary-errors"></div>

        <!-- Email -->
        <div class="form-group">
            <div class="input-wrap">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="0 0 32 32"><path d="M2 6v20h28V6Zm26 2v2.82L16 18.14 4 10.82V8Zm0 6.18v9.82H4v-9.82l12 7.32Z" /></svg>
                <input asp-for="Input.Email" class="form-control" placeholder="Email address" autocomplete="username" />
            </div>
            <span asp-validation-for="Input.Email" class="text-danger small"></span>
        </div>

        <!-- Password -->
        <div class="form-group">
            <div class="input-wrap">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="-64 0 512 512" height="20"><path d="m336 512h-288c-26.453125 0-48-21.523438-48-48v-224c0-26.476562 21.546875-48 48-48h288c26.453125 0 48 21.523438 48 48v224c0 26.476562-21.546875 48-48 48zm-288-288c-8.8125 0-16 7.167969-16 16v224c0 8.832031 7.1875 16 16 16h288c8.8125 0 16-7.167969 16-16v-224c0-8.832031-7.1875-16-16-16zm0 0"></path><path d="m304 224c-8.832031 0-16-7.167969-16-16v-80c0-52.929688-43.070312-96-96-96s-96 43.070312-96 96v80c0 8.832031-7.167969 16-16 16s-16-7.167969-16-16v-80c0-70.59375 57.40625-128 128-128s128 57.40625 128 128v80c0 8.832031-7.167969 16-16 16zm0 0"></path></svg>
                <input asp-for="Input.Password" class="form-control" placeholder="Password" autocomplete="current-password" />
            </div>
            <span asp-validation-for="Input.Password" class="text-danger small"></span>
        </div>

        <!-- Remember + Forgot -->
        <div class="options-row">
            <div class="d-flex align-items-center gap-2">
                <input class="form-check-input" asp-for="Input.RememberMe" id="rememberMe" />
                <label asp-for="Input.RememberMe" class="mb-0 small"></label>
            </div>

        </div>

        <!-- Submit -->
        <button id="login-submit" type="submit" class="btn-primary-lg">
            Sign&nbsp;In
        </button>


        @if (Model.ExternalLogins?.Count > 0)
        {
            <p class="note divider"><span>or continue with</span></p>
            @foreach (var provider in Model.ExternalLogins)
            {
                <button type="submit"
                        class="btn-alt"
                        name="provider"
                        value="@provider.Name"
                        formaction="ExternalLogin?handler=ExternalLogin&returnUrl=@Model.ReturnUrl">
                    <img src="~/icons/@provider.Name.ToLower().Replace(" ", "")-logo.svg" alt="">
                    @provider.DisplayName
                </button>
            }
        }
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
